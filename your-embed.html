<html>
    <head>
    </head>
    <body>
        Text
        <div style="z-index: 1;">
            <iframe
                id="flipbook-iframe"
                src="http://localhost:5173/"
                frameborder="0"
                width="100%"
                height="50%"
                style="z-index: 1; min-height: 600px;"
                allowfullscreen
                webkitallowfullscreen
                mozallowfullscreen>
            </iframe>
        </div>
        Text

        <script>
            const iframe = document.getElementById('flipbook-iframe');
            
            // Listen for messages from iframe
            window.addEventListener('message', (event) => {
                // Handle height updates
                if (event.data.type === 'flipbook-height') {
                    iframe.style.height = event.data.height + 'px';
                }
                
                // Handle fullscreen request
                if (event.data.type === 'request-fullscreen') {
                    if (iframe.requestFullscreen) {
                        iframe.requestFullscreen();
                    } else if (iframe.webkitRequestFullscreen) {
                        iframe.webkitRequestFullscreen();
                    } else if (iframe.mozRequestFullScreen) {
                        iframe.mozRequestFullScreen();
                    } else if (iframe.msRequestFullscreen) {
                        iframe.msRequestFullscreen();
                    }
                }
                
                // Handle exit fullscreen request
                if (event.data.type === 'exit-fullscreen') {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    } else if (document.webkitExitFullscreen) {
                        document.webkitExitFullscreen();
                    } else if (document.mozCancelFullScreen) {
                        document.mozCancelFullScreen();
                    } else if (document.msExitFullscreen) {
                        document.msExitFullscreen();
                    }
                }
            });
            
            // Listen for fullscreen changes and notify iframe
            function notifyIframeFullscreenState() {
                const isFullscreen = !!(document.fullscreenElement || 
                                       document.webkitFullscreenElement || 
                                       document.mozFullScreenElement || 
                                       document.msFullscreenElement);
                iframe.contentWindow.postMessage({
                    type: 'fullscreen-state',
                    isFullscreen: isFullscreen
                }, '*');
            }
            
            document.addEventListener('fullscreenchange', notifyIframeFullscreenState);
            document.addEventListener('webkitfullscreenchange', notifyIframeFullscreenState);
        </script>
    </body>
</html>
